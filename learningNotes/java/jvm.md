### 1、jvm的内存参数如何设置

jvm主要管理两种内存：堆内存和非堆内存。堆是在java虚拟机启动时创建的。

默认的最小堆内存是物理内存的1/64，最大堆内存是物理内存的1/4。

默认空余堆内存小于40%时，JVM就会增大堆直到-Xmx的最大限制；空余堆内存大于70% 时，JVM会减少堆直到-Xms的最小限制。因此服务器一般设置-Xms、-Xmx相等以避免在每次GC 后调整堆的大小。

=======================================================================================

java整个堆大小设置，-Xmx和-Xms设置为老年代存活对象的3-4倍，即FullGC之后的老年代内存占用的3-4倍

永久代PermSize和MaxPermSize设置为老年代存活对象的1.2-1.5倍

年轻代设置为老年代存活对象的1-1.5倍

老年代的内存大小设置为老年代存活对象的2-3倍



1、sun官方建议年轻代的大小围整个堆的3/8左右

### 2、jdk自带性能监控与故障处理工具

jps：查询正在运行虚拟机线程

pstat: 查询虚拟机的一些统计信息，如堆使用情况、类加载信息等

jinfo: 查询虚拟机的配置信息

jmap： 生成堆转储快照

jhat:  分析堆转储快照

jstack: 进行堆栈跟踪

jConsole:  可视化的java内存分析工具，可以观察堆使用情况，线程使用情况等

### 3、.class文件结构

魔数、版本号、常量池大小、常量池（字面量和符号引用）、访问标志、类索引、父类索引、接口索引集合、字段表集合、

方法表集合、属性表集合

### 4、类加载的过程

加载、验证、准备（为类变量分配内存并赋初值）、解析（对引用进行解析）、初始化、使用、卸载