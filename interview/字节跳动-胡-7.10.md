# 字节跳动7.10

### 1、如果部署多个redis,怎么保证生成的序列号码唯一

### 2、HashMap和treeMap的区别，treeMap用在什么环境下

###3、tcp协议怎么保证是可靠的

数据包校验、对失序的数据包进行重排、确认机制、超时重传机制、流量控制机制

###4、udp最大报文长度是多少

udp用户数据报由两部分组成，首部字段和数据字段。首部字段长8个字节，由四个字段组成，每个字段长度都是两个字节。分别为源端口、目的端口、长度、检验和。由与长度字段由两个字节组成，最多可表示65535，故udp用户数据报最大程度为65535（包含首部和数据部分）。在交给Ip层时，会进行分片。

——————————————————————————————————————————————————

对tcp协议来说，整个包的最大长度由最大报文段长度MSS（max segment size)决定，MSS是tcp数据包每次能够传输的最大数据分段，tcp报文段的长度为MSS加上tcp的首部。MSS在建立连接时由通信双方协商确定，最大MSS为1460（ip数据包最大长度为1500，减去ip首部20字节，减去tcp首部20字节为1460字节。以太网中ip数据包最小长度为46字节，因为Mac帧最小长度为64字节（碰撞检测），减去首部尾部18个字节为46字节）

### 5、进程是什么的最小单元、操作系统给进程分配了哪些资源

进程是操作系统进行资源分配的基本单位，操作系统给进程分配内存、cup、I/O设备

### 6、线程共享地址空间吗，线程有没有自己的独立资源

### 7、多线程访问共享资源，怎么做

### 8、如果共享资源是一个int类型变量，怎么做

### 9、ping命令用到什么协议

使用的是[ICMP协议](https://www.baidu.com/s?wd=ICMP%E5%8D%8F%E8%AE%AE&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)，是“Internet Control Message Protocol”（Internet控制消息协议）的缩写，是[TCP/IP](https://www.baidu.com/s?wd=TCP%2FIP&tn=SE_PcZhidaonwhc_ngpagmjz&rsv_dl=gh_pc_zhidao)协议族的一个子协议，用于在IP主机、路由器之间传递控制消息。

### 10、tcp/ip协议中，如果遇到两个重复的报文，会怎么做

报文重复一般是由确认丢失和确认迟到引起的。

收到重复分组：确认丢失是指A发送给B分组后，B发送的确认丢失或迟到了，A认为B没有收到分组，进行超时重传，这时候B会收到重复报文。将重复报文丢弃后，再次向A发送确认。

收到重复确认：在确认迟到中，A由于收不到B的确认进行超时重传并收到确认，之后再次收到迟到的确认，只需将重复确认丢掉即可。

### 11、编程题

![](<https://github.com/xrg123/note/blob/master/image/QQ%E5%9B%BE%E7%89%8720190711195736.png>)





